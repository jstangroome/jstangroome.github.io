As part of my new job with <a href="https://www.squixa.com/">Squixa</a> I have been working with <a href="https://www.varnish-cache.org/">Varnish Cache</a> everyday. Varnish, together with its very capable Varnish Configuration Language (VCL), is a great piece of software for getting the best experience for websites that weren't necessarily built with cache-ability or high-volume traffic in mind.

At the same time though, getting the VCL just right to achieve the desired caching outcome for particular resources can be an exercise in reliably reproducing the expected requests and careful analysis of the varnish logs. It isn't always possible to find an environment where this can be done with minimal distraction and impact on others.

At a company retreat in October my colleagues and I were discussing this scenario and one of us pointed out how <a href="http://jsfiddle.net/">JSFiddle</a> provides a great experience for dealing with similar concerns albeit in the space of client-side JavaScript. I subsequently came to the conclusion that it should be possible build a similar tool for Varnish, so I did and you can use it now at <a href="http://www.vclfiddle.net/">www.vclfiddle.net</a> and it is <a href="https://github.com/vclfiddle/vclfiddle">open-sourced on GitHub</a> too.

VclFiddle enables you to specify a set of Varnish Configuration Language statements (including defining the backend origin server), and a set of HTTP requests and have them executed in a new, isolated Varnish Cache instance. In return you get the raw <a href="https://www.varnish-cache.org/docs/trunk/reference/varnishlog.html">varnishlog</a> output (including tracing) and all the response headers for each request, including a quick summary of which requests resulted in a cache hit or miss.

Each time a Fiddle is executed, a new Fiddle-specific URL is produced and displayed in the browser address bar and this URL can then be shared with anyone. So, much like JSFiddle, you can use VclFiddle to reproduce a difficult problem you might be having with Varnish and then post the Fiddle URL to your colleagues, or to Twitter, or to an online forum to seek assistance. Or you could share a Fiddle URL to demonstrate some cool behaviour you've achieved with Varnish.

VclFiddle is built with <a href="http://sailsjs.org/">Sails.js</a> (a <a href="http://nodejs.org/">Node.js</a> MVC framework) and Docker. It is the power of <a href="https://www.docker.com/">Docker</a> that makes it fast for the tool to spawn as many instances and versions of Varnish as needed for each Fiddle to execute and easy for people to add support for different Varnish versions. For example, it takes an average of 709 milliseconds to execute a Fiddle and it took my colleague <a href="https://twitter.com/dalziel">Glenn</a> less than an hour to add a new Docker image to provide Varnish 2.1 support.

The <a href="https://github.com/vclfiddle/vclfiddle#vclfiddle">README</a> in the VclFiddle repository has much more detail on how it works and how to use it. There is also a <a href="http://youtu.be/lJ-Rf1L94Sc">video demo</a>, and a few example walk-throughs on the left-hand pane of the VclFiddle site. I hope that, if you're a Varnish user you'll find VclFiddle useful and it will become a regular tool in your belt. If you're not familiar with Varnish Cache, perhaps VclFiddle will provide a good introduction to its capabilities so you can adopt it to optimize your web application. In any case, your feedback is welcome by contacting me, the <a href="https://twitter.com/vclfiddle">@vclfiddle Twitter account</a>, or via <a href="https://github.com/vclfiddle/vclfiddle/issues">GitHub issues</a>.